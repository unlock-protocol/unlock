{"version":3,"sources":["webpack://@unlock-protocol/paywall/../node_modules/postmate/build/postmate.es.js","webpack://@unlock-protocol/paywall/../packages/networks/dist/index.js","webpack://@unlock-protocol/paywall/../packages/networks/dist/networks/index.js","webpack://@unlock-protocol/paywall/../packages/networks/dist/networks/localhost.js","webpack://@unlock-protocol/paywall/../packages/networks/dist/networks/mainnet.js","webpack://@unlock-protocol/paywall/../packages/networks/dist/networks/polygon.js","webpack://@unlock-protocol/paywall/../packages/networks/dist/networks/rinkeby.js","webpack://@unlock-protocol/paywall/../packages/networks/dist/networks/xdai.js","webpack://@unlock-protocol/paywall/./src/paywall-script/iframe.css","webpack://@unlock-protocol/paywall/./node_modules/css-loader/dist/runtime/api.js","webpack://@unlock-protocol/paywall/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://@unlock-protocol/paywall/./src/paywall-script/iframe.css?4b3b","webpack://@unlock-protocol/paywall/./node_modules/style-loader/dist/runtime/getTarget.js","webpack://@unlock-protocol/paywall/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@unlock-protocol/paywall/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://@unlock-protocol/paywall/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://@unlock-protocol/paywall/./src/paywall-script/Paywall.ts","webpack://@unlock-protocol/paywall/./src/paywall-script/networkConfigs.ts","webpack://@unlock-protocol/paywall/./src/paywall-script/utils.ts","webpack://@unlock-protocol/paywall/./src/utils/enableInjectedProvider.ts","webpack://@unlock-protocol/paywall/./src/utils/getTransaction.ts","webpack://@unlock-protocol/paywall/./src/utils/isUnlocked.ts","webpack://@unlock-protocol/paywall/./src/utils/keyExpirationTimestampFor.ts","webpack://@unlock-protocol/paywall/./src/utils/optimisticUnlocking.ts","webpack://@unlock-protocol/paywall/./src/utils/localStorage.js","webpack://@unlock-protocol/paywall/webpack/bootstrap","webpack://@unlock-protocol/paywall/webpack/runtime/compat get default export","webpack://@unlock-protocol/paywall/webpack/runtime/define property getters","webpack://@unlock-protocol/paywall/webpack/runtime/hasOwnProperty shorthand","webpack://@unlock-protocol/paywall/webpack/runtime/make namespace object","webpack://@unlock-protocol/paywall/./src/paywall-script/index.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;;AAEA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,eAAe;AAC7B,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,IAAqC;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,YAAY,aAAa;AACnD;AACA;;AAEA;AACA,YAAY,IAAqC;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,IAAqC;AAC7C;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;;;AAGR,iEAAiE;;;AAGjE;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AACD;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ,IAAqC;AAC7C;AACA;AACA;;AAEA;AACA;;AAEA,UAAU,IAAqC;AAC/C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;;;AAGP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;;AAEA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,CAAC;AACD;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,IAAqC;AACnD;AACA;;AAEA;;AAEA;;AAEA,cAAc,IAAqC;AACnD;AACA;;AAEA;AACA,SAAS;AACT;;;AAGA,YAAY,IAAqC;AACjD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,YAAY,IAAqC;AACjD;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA,UAAU,IAAqC;AAC/C;AACA;AACA,SAAS;AACT;;AAEA;AACA,KAAK;AACL;;AAEA;AACA,CAAC;AACD;AACA;AACA,UAAU;AACV;;;AAGA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AAC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AAkB;;AAE/C,aAAa,0GAAG,CAAC,oFAAO;;;;AAIiD;AACzE,OAAO,+DAAe,oFAAO,IAAI,2FAAc,GAAG,2FAAc,YAAY,EAAC;;;;;;;;;;;ACjDhE;;AAEb;AACA;;AAEA;AACA;AACA,qDAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2B;;;;;;;;;;AC1Ba;;AAEb;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,6BAA6B;AACjD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;;;;;AChGa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oC;;;;;;;;;;ACVa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,wB;;;;;;;;;;;;;;;;;;;;;;;AC/C+B;AAGV;AACoD;AAClB;AACE;AACT;AAMR;AAEjC,MAAM,uBAAuB,GAAG,0BAA0B;AAiBjE,IAAY,cAMX;AAND,WAAY,cAAc;IACxB,gDAA8B;IAC9B,oDAAkC;IAClC,8DAA4C;IAC5C,oDAAkC;I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","file":"unlock.latest.min.js","sourcesContent":["/**\n  postmate - A powerful, simple, promise-based postMessage library\n  @version v1.5.2\n  @link https://github.com/dollarshaveclub/postmate\n  @author Jacob Kelley <jakie8@gmail.com>\n  @license MIT\n**/\n/**\n * The type of messages our frames our sending\n * @type {String}\n */\nvar messageType = 'application/x-postmate-v1+json';\n/**\n * The maximum number of attempts to send a handshake request to the parent\n * @type {Number}\n */\n\nvar maxHandshakeRequests = 5;\n/**\n * A unique message ID that is used to ensure responses are sent to the correct requests\n * @type {Number}\n */\n\nvar _messageId = 0;\n/**\n * Increments and returns a message ID\n * @return {Number} A unique ID for a message\n */\n\nvar generateNewMessageId = function generateNewMessageId() {\n  return ++_messageId;\n};\n/**\n * Postmate logging function that enables/disables via config\n * @param  {Object} ...args Rest Arguments\n */\n\nvar log = function log() {\n  var _console;\n\n  return Postmate.debug ? (_console = console).log.apply(_console, arguments) : null;\n}; // eslint-disable-line no-console\n\n/**\n * Takes a URL and returns the origin\n * @param  {String} url The full URL being requested\n * @return {String}     The URLs origin\n */\n\nvar resolveOrigin = function resolveOrigin(url) {\n  var a = document.createElement('a');\n  a.href = url;\n  var protocol = a.protocol.length > 4 ? a.protocol : window.location.protocol;\n  var host = a.host.length ? a.port === '80' || a.port === '443' ? a.hostname : a.host : window.location.host;\n  return a.origin || protocol + \"//\" + host;\n};\nvar messageTypes = {\n  handshake: 1,\n  'handshake-reply': 1,\n  call: 1,\n  emit: 1,\n  reply: 1,\n  request: 1\n  /**\n   * Ensures that a message is safe to interpret\n   * @param  {Object} message The postmate message being sent\n   * @param  {String|Boolean} allowedOrigin The whitelisted origin or false to skip origin check\n   * @return {Boolean}\n   */\n\n};\nvar sanitize = function sanitize(message, allowedOrigin) {\n  if (typeof allowedOrigin === 'string' && message.origin !== allowedOrigin) return false;\n  if (!message.data) return false;\n  if (typeof message.data === 'object' && !('postmate' in message.data)) return false;\n  if (message.data.type !== messageType) return false;\n  if (!messageTypes[message.data.postmate]) return false;\n  return true;\n};\n/**\n * Takes a model, and searches for a value by the property\n * @param  {Object} model     The dictionary to search against\n * @param  {String} property  A path within a dictionary (i.e. 'window.location.href')\n * @param  {Object} data      Additional information from the get request that is\n *                            passed to functions in the child model\n * @return {Promise}\n */\n\nvar resolveValue = function resolveValue(model, property) {\n  var unwrappedContext = typeof model[property] === 'function' ? model[property]() : model[property];\n  return Postmate.Promise.resolve(unwrappedContext);\n};\n/**\n * Composes an API to be used by the parent\n * @param {Object} info Information on the consumer\n */\n\nvar ParentAPI =\n/*#__PURE__*/\nfunction () {\n  function ParentAPI(info) {\n    var _this = this;\n\n    this.parent = info.parent;\n    this.frame = info.frame;\n    this.child = info.child;\n    this.childOrigin = info.childOrigin;\n    this.events = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      log('Parent: Registering API');\n      log('Parent: Awaiting messages...');\n    }\n\n    this.listener = function (e) {\n      if (!sanitize(e, _this.childOrigin)) return false;\n      /**\n       * the assignments below ensures that e, data, and value are all defined\n       */\n\n      var _ref = ((e || {}).data || {}).value || {},\n          data = _ref.data,\n          name = _ref.name;\n\n      if (e.data.postmate === 'emit') {\n        if (process.env.NODE_ENV !== 'production') {\n          log(\"Parent: Received event emission: \" + name);\n        }\n\n        if (name in _this.events) {\n          _this.events[name].call(_this, data);\n        }\n      }\n    };\n\n    this.parent.addEventListener('message', this.listener, false);\n\n    if (process.env.NODE_ENV !== 'production') {\n      log('Parent: Awaiting event emissions from Child');\n    }\n  }\n\n  var _proto = ParentAPI.prototype;\n\n  _proto.get = function get(property) {\n    var _this2 = this;\n\n    return new Postmate.Promise(function (resolve) {\n      // Extract data from response and kill listeners\n      var uid = generateNewMessageId();\n\n      var transact = function transact(e) {\n        if (e.data.uid === uid && e.data.postmate === 'reply') {\n          _this2.parent.removeEventListener('message', transact, false);\n\n          resolve(e.data.value);\n        }\n      }; // Prepare for response from Child...\n\n\n      _this2.parent.addEventListener('message', transact, false); // Then ask child for information\n\n\n      _this2.child.postMessage({\n        postmate: 'request',\n        type: messageType,\n        property: property,\n        uid: uid\n      }, _this2.childOrigin);\n    });\n  };\n\n  _proto.call = function call(property, data) {\n    // Send information to the child\n    this.child.postMessage({\n      postmate: 'call',\n      type: messageType,\n      property: property,\n      data: data\n    }, this.childOrigin);\n  };\n\n  _proto.on = function on(eventName, callback) {\n    this.events[eventName] = callback;\n  };\n\n  _proto.destroy = function destroy() {\n    if (process.env.NODE_ENV !== 'production') {\n      log('Parent: Destroying Postmate instance');\n    }\n\n    window.removeEventListener('message', this.listener, false);\n    this.frame.parentNode.removeChild(this.frame);\n  };\n\n  return ParentAPI;\n}();\n/**\n * Composes an API to be used by the child\n * @param {Object} info Information on the consumer\n */\n\nvar ChildAPI =\n/*#__PURE__*/\nfunction () {\n  function ChildAPI(info) {\n    var _this3 = this;\n\n    this.model = info.model;\n    this.parent = info.parent;\n    this.parentOrigin = info.parentOrigin;\n    this.child = info.child;\n\n    if (process.env.NODE_ENV !== 'production') {\n      log('Child: Registering API');\n      log('Child: Awaiting messages...');\n    }\n\n    this.child.addEventListener('message', function (e) {\n      if (!sanitize(e, _this3.parentOrigin)) return;\n\n      if (process.env.NODE_ENV !== 'production') {\n        log('Child: Received request', e.data);\n      }\n\n      var _e$data = e.data,\n          property = _e$data.property,\n          uid = _e$data.uid,\n          data = _e$data.data;\n\n      if (e.data.postmate === 'call') {\n        if (property in _this3.model && typeof _this3.model[property] === 'function') {\n          _this3.model[property](data);\n        }\n\n        return;\n      } // Reply to Parent\n\n\n      resolveValue(_this3.model, property).then(function (value) {\n        return e.source.postMessage({\n          property: property,\n          postmate: 'reply',\n          type: messageType,\n          uid: uid,\n          value: value\n        }, e.origin);\n      });\n    });\n  }\n\n  var _proto2 = ChildAPI.prototype;\n\n  _proto2.emit = function emit(name, data) {\n    if (process.env.NODE_ENV !== 'production') {\n      log(\"Child: Emitting Event \\\"\" + name + \"\\\"\", data);\n    }\n\n    this.parent.postMessage({\n      postmate: 'emit',\n      type: messageType,\n      value: {\n        name: name,\n        data: data\n      }\n    }, this.parentOrigin);\n  };\n\n  return ChildAPI;\n}();\n/**\n  * The entry point of the Parent.\n * @type {Class}\n */\n\nvar Postmate =\n/*#__PURE__*/\nfunction () {\n  // eslint-disable-line no-undef\n  // Internet Explorer craps itself\n\n  /**\n   * Sets options related to the Parent\n   * @param {Object} object The element to inject the frame into, and the url\n   * @return {Promise}\n   */\n  function Postmate(_ref2) {\n    var _ref2$container = _ref2.container,\n        container = _ref2$container === void 0 ? typeof container !== 'undefined' ? container : document.body : _ref2$container,\n        model = _ref2.model,\n        url = _ref2.url,\n        name = _ref2.name,\n        _ref2$classListArray = _ref2.classListArray,\n        classListArray = _ref2$classListArray === void 0 ? [] : _ref2$classListArray;\n    // eslint-disable-line no-undef\n    this.parent = window;\n    this.frame = document.createElement('iframe');\n    this.frame.name = name || '';\n    this.frame.classList.add.apply(this.frame.classList, classListArray);\n    container.appendChild(this.frame);\n    this.child = this.frame.contentWindow || this.frame.contentDocument.parentWindow;\n    this.model = model || {};\n    return this.sendHandshake(url);\n  }\n  /**\n   * Begins the handshake strategy\n   * @param  {String} url The URL to send a handshake request to\n   * @return {Promise}     Promise that resolves when the handshake is complete\n   */\n\n\n  var _proto3 = Postmate.prototype;\n\n  _proto3.sendHandshake = function sendHandshake(url) {\n    var _this4 = this;\n\n    var childOrigin = resolveOrigin(url);\n    var attempt = 0;\n    var responseInterval;\n    return new Postmate.Promise(function (resolve, reject) {\n      var reply = function reply(e) {\n        if (!sanitize(e, childOrigin)) return false;\n\n        if (e.data.postmate === 'handshake-reply') {\n          clearInterval(responseInterval);\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Parent: Received handshake reply from Child');\n          }\n\n          _this4.parent.removeEventListener('message', reply, false);\n\n          _this4.childOrigin = e.origin;\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Parent: Saving Child origin', _this4.childOrigin);\n          }\n\n          return resolve(new ParentAPI(_this4));\n        } // Might need to remove since parent might be receiving different messages\n        // from different hosts\n\n\n        if (process.env.NODE_ENV !== 'production') {\n          log('Parent: Invalid handshake reply');\n        }\n\n        return reject('Failed handshake');\n      };\n\n      _this4.parent.addEventListener('message', reply, false);\n\n      var doSend = function doSend() {\n        attempt++;\n\n        if (process.env.NODE_ENV !== 'production') {\n          log(\"Parent: Sending handshake attempt \" + attempt, {\n            childOrigin: childOrigin\n          });\n        }\n\n        _this4.child.postMessage({\n          postmate: 'handshake',\n          type: messageType,\n          model: _this4.model\n        }, childOrigin);\n\n        if (attempt === maxHandshakeRequests) {\n          clearInterval(responseInterval);\n        }\n      };\n\n      var loaded = function loaded() {\n        doSend();\n        responseInterval = setInterval(doSend, 500);\n      };\n\n      if (_this4.frame.attachEvent) {\n        _this4.frame.attachEvent('onload', loaded);\n      } else {\n        _this4.frame.onload = loaded;\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        log('Parent: Loading frame', {\n          url: url\n        });\n      }\n\n      _this4.frame.src = url;\n    });\n  };\n\n  return Postmate;\n}();\n/**\n * The entry point of the Child\n * @type {Class}\n */\n\n\nPostmate.debug = false;\n\nPostmate.Promise = function () {\n  try {\n    return window ? window.Promise : Promise;\n  } catch (e) {\n    return null;\n  }\n}();\n\nPostmate.Model =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Initializes the child, model, parent, and responds to the Parents handshake\n   * @param {Object} model Hash of values, functions, or promises\n   * @return {Promise}       The Promise that resolves when the handshake has been received\n   */\n  function Model(model) {\n    this.child = window;\n    this.model = model;\n    this.parent = this.child.parent;\n    return this.sendHandshakeReply();\n  }\n  /**\n   * Responds to a handshake initiated by the Parent\n   * @return {Promise} Resolves an object that exposes an API for the Child\n   */\n\n\n  var _proto4 = Model.prototype;\n\n  _proto4.sendHandshakeReply = function sendHandshakeReply() {\n    var _this5 = this;\n\n    return new Postmate.Promise(function (resolve, reject) {\n      var shake = function shake(e) {\n        if (!e.data.postmate) {\n          return;\n        }\n\n        if (e.data.postmate === 'handshake') {\n          if (process.env.NODE_ENV !== 'production') {\n            log('Child: Received handshake from Parent');\n          }\n\n          _this5.child.removeEventListener('message', shake, false);\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Child: Sending handshake reply to Parent');\n          }\n\n          e.source.postMessage({\n            postmate: 'handshake-reply',\n            type: messageType\n          }, e.origin);\n          _this5.parentOrigin = e.origin; // Extend model with the one provided by the parent\n\n          var defaults = e.data.model;\n\n          if (defaults) {\n            Object.keys(defaults).forEach(function (key) {\n              _this5.model[key] = defaults[key];\n            });\n\n            if (process.env.NODE_ENV !== 'production') {\n              log('Child: Inherited and extended model from Parent');\n            }\n          }\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Child: Saving Parent origin', _this5.parentOrigin);\n          }\n\n          return resolve(new ChildAPI(_this5));\n        }\n\n        return reject('Handshake Reply Failed');\n      };\n\n      _this5.child.addEventListener('message', shake, false);\n    });\n  };\n\n  return Model;\n}();\n\nexport default Postmate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.networks = exports.localhost = exports.polygon = exports.xdai = exports.rinkeby = exports.mainnet = void 0;\nconst networks_1 = require(\"./networks\");\n// re-export by name\nvar networks_2 = require(\"./networks\");\nObject.defineProperty(exports, \"mainnet\", { enumerable: true, get: function () { return networks_2.mainnet; } });\nObject.defineProperty(exports, \"rinkeby\", { enumerable: true, get: function () { return networks_2.rinkeby; } });\nObject.defineProperty(exports, \"xdai\", { enumerable: true, get: function () { return networks_2.xdai; } });\nObject.defineProperty(exports, \"polygon\", { enumerable: true, get: function () { return networks_2.polygon; } });\nObject.defineProperty(exports, \"localhost\", { enumerable: true, get: function () { return networks_2.localhost; } });\n// export by chainId\nexports.networks = {\n    1: networks_1.mainnet,\n    4: networks_1.rinkeby,\n    100: networks_1.xdai,\n    137: networks_1.polygon,\n    31337: networks_1.localhost,\n};\nexports.default = exports.networks;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./localhost\"), exports);\n__exportStar(require(\"./mainnet\"), exports);\n__exportStar(require(\"./rinkeby\"), exports);\n__exportStar(require(\"./xdai\"), exports);\n__exportStar(require(\"./polygon\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.localhost = void 0;\nexports.localhost = {\n    id: 31117,\n    name: 'localhost',\n    provider: 'http://127.0.0.1:8545',\n    locksmithUri: 'http://127.0.0.1:8080',\n    unlockAppUrl: 'http://0.0.0.0:3000',\n    subgraphURI: 'http://localhost:8000/subgraphs/name/unlock-protocol/unlock',\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mainnet = void 0;\nexports.mainnet = {\n    // httpProvider: null, // we use the injected provider!\n    id: 1,\n    provider: 'https://eth-mainnet.alchemyapi.io/v2/6idtzGwDtRbzil3s6QbYHr2Q_WBfn100',\n    readOnlyProvider: 'https://eth-mainnet.alchemyapi.io/v2/b7Mxclz5hGyHqoeodGLQ17F5Qi97S7xJ',\n    unlockAddress: '0x3d5409CcE1d45233dE1D4eBDEe74b8E004abDD13',\n    name: 'Ethereum',\n    blockTime: 8000,\n    subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/unlock',\n    explorer: {\n        name: 'Etherscan',\n        urls: {\n            address: (address) => `https://etherscan.io/address/${address}`,\n            transaction: (hash) => `https://etherscan.io/tx/${hash}`,\n        },\n    },\n    erc20: {\n        symbol: 'DAI',\n        address: '0x6b175474e89094c44da98b954eedeac495271d0f',\n    },\n    requiredConfirmations: 12,\n    baseCurrencySymbol: 'Eth',\n    locksmithUri: 'https://locksmith.unlock-protocol.com',\n    nativeCurrency: {\n        name: 'Ether',\n        symbol: 'Eth',\n        decimals: 18,\n    },\n};\nexports.default = exports.mainnet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.polygon = void 0;\nexports.polygon = {\n    provider: 'https://snowy-weathered-waterfall.matic.quiknode.pro/5b11a0413a62a295070c0dfb25637d5f8c591aba/',\n    unlockAddress: '0x14bb3586Ce2946E71B95Fe00Fc73dd30ed830863',\n    id: 137,\n    name: 'Polygon',\n    blockTime: 1000,\n    subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/polygon',\n    explorer: {\n        name: 'Polygonscan',\n        urls: {\n            address: (address) => `https://polygonscan.com/address/${address}`,\n            transaction: (hash) => `https://polygonscan.com/tx/${hash}`,\n        },\n    },\n    requiredConfirmations: 12,\n    erc20: null,\n    baseCurrencySymbol: 'Matic',\n    locksmithUri: 'https://locksmith.unlock-protocol.com',\n    nativeCurrency: {\n        name: 'Matic',\n        symbol: 'MATIC',\n        decimals: 18,\n    },\n};\nexports.default = exports.polygon;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rinkeby = void 0;\nexports.rinkeby = {\n    provider: 'https://eth-rinkeby.alchemyapi.io/v2/n0NXRSZ9olpkJUPDLBC00Es75jaqysyT',\n    unlockAddress: '0xd8c88be5e8eb88e38e6ff5ce186d764676012b0b',\n    id: 4,\n    name: 'Rinkeby',\n    blockTime: 8000,\n    subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/unlock-rinkeby',\n    explorer: {\n        name: 'Etherscan',\n        urls: {\n            address: (address) => `https://rinkeby.etherscan.io/address/${address}`,\n            transaction: (hash) => `https://rinkeby.etherscan.io/tx/${hash}`,\n        },\n    },\n    requiredConfirmations: 12,\n    erc20: {\n        symbol: 'WEE',\n        address: '0xaFF4481D10270F50f203E0763e2597776068CBc5',\n    },\n    baseCurrencySymbol: 'Eth',\n    locksmithUri: 'https://rinkeby.locksmith.unlock-protocol.com',\n    nativeCurrency: {\n        name: 'Rinkeby Eth',\n        symbol: 'Eth',\n        decimals: 18,\n    },\n};\nexports.default = exports.rinkeby;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.xdai = void 0;\nexports.xdai = {\n    provider: 'https://rpc.xdaichain.com/',\n    unlockAddress: '0x14bb3586Ce2946E71B95Fe00Fc73dd30ed830863',\n    id: 100,\n    name: 'xDai',\n    blockTime: 5000,\n    requiredConfirmations: 12,\n    subgraphURI: 'https://api.thegraph.com/subgraphs/name/unlock-protocol/xdai',\n    explorer: {\n        name: 'Blockscout',\n        urls: {\n            address: (address) => `https://blockscout.com/poa/xdai/address/${address}/transactions`,\n            transaction: (hash) => `https://blockscout.com/poa/xdai/tx/${hash}`,\n        },\n    },\n    erc20: null,\n    locksmithUri: 'https://locksmith.unlock-protocol.com',\n    baseCurrencySymbol: 'xDai',\n    nativeCurrency: {\n        name: 'xDAI',\n        symbol: 'xDai',\n        decimals: 18,\n    },\n};\nexports.default = exports.xdai;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".unlock-protocol-checkout {\\n  display: none;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100vh;\\n  border: 0;\\n  z-index: -2147483647;\\n}\\n\\n.unlock-protocol-checkout.show {\\n  display: block;\\n  z-index: 2147483647;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/paywall-script/iframe.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,eAAe;EACf,MAAM;EACN,OAAO;EACP,WAAW;EACX,aAAa;EACb,SAAS;EACT,oBAAoB;AACtB;;AAEA;EACE,cAAc;EACd,mBAAmB;AACrB\",\"sourcesContent\":[\".unlock-protocol-checkout {\\n  display: none;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100vh;\\n  border: 0;\\n  z-index: -2147483647;\\n}\\n\\n.unlock-protocol-checkout.show {\\n  display: block;\\n  z-index: 2147483647;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import getTarget from \"!../../node_modules/style-loader/dist/runtime/getTarget.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./iframe.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = function(css, style){\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n      while (style.firstChild) {\n        style.removeChild(style.firstChild);\n      }\n\n      style.appendChild(document.createTextNode(css));\n    }\n  };\noptions.setAttributes = function(style) {\n        var nonce =\n          typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n        if (nonce) {\n          style.setAttribute(\"nonce\", nonce);\n        }\n      };\noptions.insert = function(style){\n    var target = getTarget(\"head\");\n\n    if (!target) {\n      throw new Error(\n        \"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\"\n      );\n    }\n\n    target.appendChild(style);\n  };\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./iframe.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n\nmodule.exports = getTarget;","\"use strict\";\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var style = document.createElement(\"style\");\n  options.setAttributes(style, options.attributes);\n  options.insert(style);\n  return style;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute(\"media\", media);\n  } else {\n    style.removeAttribute(\"media\");\n  }\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, style);\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var style = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(style, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(style);\n    }\n  };\n}\n\nmodule.exports = domAPI;","import Postmate from 'postmate'\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { PaywallConfig, NetworkConfigs } from 'src/unlockTypes'\nimport './iframe.css'\nimport { dispatchEvent, unlockEvents, injectProviderInfo } from './utils'\nimport { store, retrieve } from '../utils/localStorage'\nimport { willUnlock } from '../utils/optimisticUnlocking'\nimport { isUnlocked } from '../utils/isUnlocked'\nimport {\n  Enabler,\n  getProvider,\n  Web3Window,\n  enableInjectedProvider,\n} from '../utils/enableInjectedProvider'\n\nexport const checkoutIframeClassName = 'unlock-protocol-checkout'\n\n/**\n * These type definitions come from `useCheckoutCommunication` in\n * `unlock-app`. We'll have to keep them in sync manually because we\n * don't have access to `unlock-app` files in the `paywall` docker\n * image.\n */\nexport interface UserInfo {\n  address: string\n}\n\nexport interface TransactionInfo {\n  hash: string\n  lock: string\n}\n\nexport enum CheckoutEvents {\n  userInfo = 'checkout.userInfo',\n  closeModal = 'checkout.closeModal',\n  transactionInfo = 'checkout.transactionInfo',\n  methodCall = 'checkout.methodCall',\n  onEvent = 'checkout.onEvent',\n}\n\nexport interface MethodCall {\n  method: string\n  params: any\n  id: number\n}\n\nexport interface MethodCallResult {\n  id: number\n  response?: any\n  error?: any\n}\n/* end type definitions */\n\nexport class Paywall {\n  childCallBuffer: [string, any?][] = []\n\n  networkConfigs: NetworkConfigs\n\n  paywallConfig!: PaywallConfig\n\n  userAccountAddress?: string\n\n  iframe?: Element\n\n  lockStatus?: string\n\n  provider?: Enabler\n\n  child?: Postmate.ParentAPI\n\n  constructor(\n    paywallConfig: PaywallConfig,\n    networkConfigs: NetworkConfigs,\n    provider?: any\n  ) {\n    this.networkConfigs = networkConfigs\n    // Use provider in parameter, fall back to injected provider in window (if any)\n    this.provider = provider || getProvider(window as Web3Window)\n    this.resetConfig(paywallConfig)\n    // Always do this last!\n    this.loadCache()\n  }\n\n  loadCheckoutModal = (config?: PaywallConfig) => {\n    if (this.iframe) {\n      this.showIframe()\n    } else {\n      this.shakeHands()\n    }\n    this.sendOrBuffer('setConfig', config || this.paywallConfig)\n  }\n\n  getUserAccountAddress = () => {\n    return this.userAccountAddress\n  }\n\n  resetConfig = (config: PaywallConfig) => {\n    this.paywallConfig = injectProviderInfo(config, this.provider)\n    this.checkKeysAndLock()\n    this.sendOrBuffer('setConfig', config || this.paywallConfig)\n  }\n\n  getState = () => {\n    return this.lockStatus\n  }\n\n  // Saves the user info in the cache\n  cacheUserInfo = async (info: UserInfo) => {\n    store('userInfo', info)\n  }\n\n  // Loads the cache\n  loadCache = async () => {\n    const info = retrieve('userInfo')\n    if (!info) {\n      return this.lockPage()\n    }\n    this.userAccountAddress = info.address\n    this.checkKeysAndLock()\n  }\n\n  // Will lock or unlock the page based on the current state\n  checkKeysAndLock = async () => {\n    // For each lock.\n    if (!this.userAccountAddress) {\n      return\n    }\n    this.lockStatus = undefined\n    const unlockedLocks = await isUnlocked(\n      this.userAccountAddress,\n      this.paywallConfig,\n      this.networkConfigs\n    )\n\n    if (unlockedLocks.length) {\n      return this.unlockPage(unlockedLocks)\n    }\n    return this.lockPage()\n  }\n\n  shakeHands = async (config?: PaywallConfig) => {\n    if (!config) {\n      config = this.paywallConfig\n    }\n\n    const { unlockAppUrl } = this.networkConfigs[config.network]\n    const child = await new Postmate({\n      url: `${unlockAppUrl}/checkout`,\n      classListArray: [checkoutIframeClassName, 'show'],\n    })\n\n    this.child = child\n\n    this.iframe = document.getElementsByClassName(checkoutIframeClassName)[0]\n\n    child.on(CheckoutEvents.closeModal, this.hideIframe)\n    child.on(CheckoutEvents.userInfo, this.handleUserInfoEvent)\n    child.on(CheckoutEvents.methodCall, this.handleMethodCallEvent)\n    child.on(CheckoutEvents.onEvent, this.handleOnEventEvent)\n\n    // transactionInfo event also carries transaction hash.\n    child.on(CheckoutEvents.transactionInfo, this.handleTransactionInfoEvent)\n\n    // flush the buffer of child calls from before the iframe was ready\n    this.childCallBuffer.forEach((bufferedCall) => child.call(...bufferedCall))\n  }\n\n  sendOrBuffer = (method: string, args: any) => {\n    if (this.child) {\n      this.child.call(method, args)\n    } else {\n      this.childCallBuffer.push([method, args])\n    }\n  }\n\n  handleTransactionInfoEvent = async ({ hash, lock }: TransactionInfo) => {\n    const { readOnlyProvider } = this.networkConfigs[this.paywallConfig.network]\n    dispatchEvent(unlockEvents.transactionSent, { hash, lock })\n    if (!this.paywallConfig.pessimistic) {\n      const optimistic = await willUnlock(\n        readOnlyProvider,\n        this.userAccountAddress!,\n        lock,\n        hash,\n        true // Optimistic if missing\n      )\n      if (optimistic) {\n        this.unlockPage([lock])\n      }\n    }\n  }\n\n  handleUserInfoEvent = async (info: UserInfo) => {\n    this.userAccountAddress = info.address\n    dispatchEvent(unlockEvents.authenticated, info)\n    this.cacheUserInfo(info)\n    this.checkKeysAndLock()\n  }\n\n  handleMethodCallEvent = async ({ method, params, id }: MethodCall) => {\n    await enableInjectedProvider(this.provider)\n    ;(this.provider! as any).sendAsync(\n      { method, params, id },\n      (error: any, response: any) => {\n        this.child!.call('resolveMethodCall', { id, error, response })\n      }\n    )\n  }\n\n  handleOnEventEvent = async (eventName: string) => {\n    await enableInjectedProvider(this.provider)\n    ;(this.provider! as any).on(eventName, () => {\n      this.child!.call('resolveOnEvent', eventName)\n    })\n  }\n\n  showIframe = () => {\n    this.iframe!.classList.add('show')\n  }\n\n  hideIframe = () => {\n    dispatchEvent(unlockEvents.closeModal, {})\n    this.iframe!.classList.remove('show')\n  }\n\n  lockPage = () => {\n    this.lockStatus = 'locked'\n    dispatchEvent(unlockEvents.status, {\n      state: this.lockStatus,\n    })\n  }\n\n  unlockPage = (locks: string[] = []) => {\n    this.lockStatus = 'unlocked'\n    dispatchEvent(unlockEvents.status, {\n      locks,\n      state: this.lockStatus,\n    })\n  }\n}\n","import networks from '@unlock-protocol/networks'\nimport { NetworkConfigs } from '../unlockTypes'\n\ndeclare var PAYWALL_URL: string\n\nlet unlockAppUrl: string\nconst baseUrl = PAYWALL_URL || 'localhost' // Set at build time\n\nif (baseUrl.match('staging-paywall.unlock-protocol.com')) {\n  unlockAppUrl = 'https://staging-app.unlock-protocol.com'\n} else if (baseUrl.match('paywall.unlock-protocol.com')) {\n  unlockAppUrl = 'https://app.unlock-protocol.com'\n} else {\n  unlockAppUrl = 'http://0.0.0.0:3000'\n}\n\n// TODO: allow customization of these values when running the script\n// This means probably adding to the unlockProtocolConfig object to include the provider, loksmith Uri and unlockAppUrl\nexport const networkConfigs: NetworkConfigs = {}\n\nconst chainIds = [1, 4, 100, 137, 31337]\n\nchainIds.map((chainId) => {\n  const { readOnlyProvider, provider, locksmithUri } = networks[chainId]\n\n  networkConfigs[chainId] = {\n    readOnlyProvider: readOnlyProvider || provider,\n    locksmithUri: locksmithUri || '',\n    unlockAppUrl,\n  }\n})\n","/* eslint-disable import/no-extraneous-dependencies */\nimport { PaywallConfig } from 'src/unlockTypes'\nimport { Enabler } from 'src/utils/enableInjectedProvider'\n\n/**\n * Dispatches events\n * @param eventName\n * @param params\n */\nexport const dispatchEvent = (eventName: string, params: any) => {\n  if (eventName === unlockEvents.status) {\n    // Supporting legacy unlockProtocol event\n    dispatchEvent('unlockProtocol', params.state)\n  }\n  let event: any\n  try {\n    event = new window.CustomEvent(eventName, { detail: params })\n  } catch (e) {\n    // older browsers do events this clunky way.\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events#The_old-fashioned_way\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/initCustomEvent#Parameters\n    event = window.document.createEvent('customevent')\n    event.initCustomEvent(\n      eventName,\n      true /* canBubble */,\n      true /* cancelable */,\n      params\n    )\n  }\n  window.dispatchEvent(event)\n}\n\n/**\n * Mapping between events and their names\n */\nexport const unlockEvents = {\n  status: 'unlockProtocol.status',\n  authenticated: 'unlockProtocol.authenticated',\n  transactionSent: 'unlockProtocol.transactionSent',\n  closeModal: 'unlockProtocol.closeModal',\n}\n\nexport const setupUnlockProtocolVariable = (properties: {\n  [name: string]: any\n}) => {\n  const unlockProtocol: Object = {}\n\n  const immutable = {\n    writable: false,\n    configurable: false,\n    enumerable: false,\n  }\n\n  const immutableProperties = Object.keys(properties).map((name) => {\n    return {\n      [name]: {\n        value: properties[name],\n        ...immutable,\n      },\n    }\n  })\n\n  Object.defineProperties(\n    unlockProtocol,\n    Object.assign({}, ...immutableProperties)\n  )\n\n  const freeze: (_obj: any) => void = Object.freeze || Object\n\n  // if freeze is available, prevents adding or\n  // removing the object prototype properties\n  // (value, get, set, enumerable, writable, configurable)\n  // TODO: consider whether this is actually necessary\n  freeze(unlockProtocol)\n\n  try {\n    Object.defineProperties(window, {\n      unlockProtocol: {\n        value: unlockProtocol,\n        ...immutable,\n      },\n    })\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.warn('WARNING: unlockProtocol already defined, cannot re-define it')\n  }\n}\n\nexport const injectProviderInfo = (\n  config: PaywallConfig,\n  provider?: Enabler\n) => {\n  const newConfig = { ...config }\n\n  // We want to inform the checkout iframe about the availability of a\n  // delegated provider. However, we will not overwrite an existing\n  // value in the config, in case the paywall owner has reason to\n  // force it one way or the other.\n  if (!newConfig.useDelegatedProvider) {\n    newConfig.useDelegatedProvider = !!provider\n  }\n\n  return newConfig\n}\n","export type Enabler = {\n  enable: () => Promise<void>\n}\n\nexport interface Web3Window {\n  // Present with more recent injected providers\n  ethereum?: Enabler\n  // Present with legacy injected providers\n  web3?: {\n    currentProvider: Enabler\n  }\n}\n\nexport const getProvider = (window: Web3Window): Enabler | undefined => {\n  // Using a \"modern\" dapp browser\n  if (window.ethereum) {\n    return window.ethereum\n  }\n\n  // Using a \"legacy\" dapp browser\n  if (window.web3) {\n    return window.web3.currentProvider\n  }\n\n  // Browser is not web3 capable\n  return undefined\n}\n\nexport const enableInjectedProvider = async (provider: Enabler | undefined) => {\n  // This should not occur; if there is no provider, the paywall\n  // script should prevent the checkout iframe from trying to connect\n  // to one.\n  if (!provider) {\n    throw new Error('Fatal: no web3 provider found.')\n  }\n\n  // resolves if provider is already enabled or if user allows provider to enable\n  // rejects if user does not allow\n  await provider.enable()\n}\n","/**\n * Gets a transaction from the RPC endpoint\n * @param provider\n * @param transactionHash\n */\nexport const getTransaction = async (\n  provider: string,\n  transactionHash: string\n) => {\n  const rpcRequest = {\n    method: 'eth_getTransactionByHash',\n    params: [transactionHash],\n    id: 31337, // Not used here\n    jsonrpc: '2.0',\n  }\n\n  const response = await fetch(provider, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(rpcRequest),\n  })\n\n  const body = await response.json()\n  return body.result\n}\n\nexport default getTransaction\n","import { keyExpirationTimestampFor } from './keyExpirationTimestampFor'\nimport { optimisticUnlocking } from './optimisticUnlocking'\nimport { PaywallConfig, NetworkConfigs } from '../unlockTypes'\n\n/**\n * A function which, given a user account, a paywall config will return the list of unlocked locks.\n * It will first check for the existence of keys, and if no valid one has been found\n * it will check for pending transactions which might be optimistic.\n */\nexport const isUnlocked = async (\n  userAccountAddress: string,\n  paywallConfig: PaywallConfig,\n  networks: NetworkConfigs\n): Promise<string[]> => {\n  const unlockedLocks: string[] = []\n  await Promise.all(\n    // For each lock\n    Object.entries(paywallConfig.locks).map(async ([lockAddress, props]) => {\n      let network = props.network || paywallConfig.network\n      const { readOnlyProvider, locksmithUri } = networks[network]\n      const timestamp = await keyExpirationTimestampFor(\n        readOnlyProvider,\n        lockAddress,\n        userAccountAddress!\n      )\n      if (timestamp > new Date().getTime() / 1000) {\n        // This lock is unlocked!\n        unlockedLocks.push(lockAddress)\n      } else if (!paywallConfig.pessimistic) {\n        const optimistic = await optimisticUnlocking(\n          readOnlyProvider,\n          locksmithUri,\n          [lockAddress],\n          userAccountAddress!\n        )\n        if (optimistic) {\n          unlockedLocks.push(lockAddress)\n        }\n      }\n    })\n  )\n\n  return unlockedLocks\n}\nexport default {\n  isUnlocked,\n}\n","export const keyExpirationTimestampFor = async (\n  provider: string,\n  lock: string,\n  userAddress: string\n) => {\n  const rpcRequest = {\n    method: 'eth_call',\n    params: [\n      {\n        to: lock,\n        data: `0xabdf82ce000000000000000000000000${userAddress.substring(2)}`,\n      },\n      'latest',\n    ],\n    id: 31337, // Not used here\n    jsonrpc: '2.0',\n  }\n\n  const response = await fetch(provider, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(rpcRequest),\n  })\n\n  const body = await response.json()\n  const result = body.result\n  if (parseInt(result, 16) > Number.MAX_SAFE_INTEGER) {\n    // This will cover cases of locks returning NO_SUCH_KEY or `HAS_NEVER_OWNED_KEY` which are strings and much larger than Number.MAX_SAFE_INTEGER\n    return 0\n  }\n  return parseInt(result, 16) || 0\n}\n\nexport default keyExpirationTimestampFor\n","import { getTransaction } from './getTransaction'\nimport { keyExpirationTimestampFor } from './keyExpirationTimestampFor'\n\ninterface StoredTransaction {\n  transactionHash: string\n  sender: string\n  recipient: string\n  chain: number\n  for: string\n  data: string\n  createdAt: string\n  updatedAt: string\n}\n\n/**\n * Yields true if we should be optimistic for user and the locks\n * @param locks\n * @param user\n */\nexport const optimisticUnlocking = async (\n  provider: string,\n  locksmithUri: string,\n  locks: string[],\n  user: string\n) => {\n  const userTransactions = await getTransactionsForUserAndLocks(\n    locksmithUri,\n    user,\n    locks\n  )\n\n  const recentTransactions = userTransactions.filter((tx) =>\n    withinLast24Hours(tx.createdAt)\n  )\n\n  const unlocked = await Promise.all(\n    recentTransactions.map((transaction) => {\n      return willUnlock(\n        provider,\n        user,\n        transaction.recipient,\n        transaction.transactionHash,\n        false // Pessimistic if missing\n      )\n    })\n  )\n\n  const reducer = (accumulator: any, currentValue: any) =>\n    currentValue || !!accumulator\n\n  return unlocked.reduce(reducer, false)\n}\n\n/**\n * Yields an array of optimistically unlocking locks\n * @param locks\n * @param user\n */\nexport const optimisticLocks = async (\n  provider: string,\n  locksmithUri: string,\n  locks: string[],\n  user: string\n) => {\n  const userTransactions = await getTransactionsForUserAndLocks(\n    locksmithUri,\n    user,\n    locks\n  )\n\n  const recentTransactions = userTransactions.filter((tx) =>\n    withinLast24Hours(tx.createdAt)\n  )\n\n  const unlocked: string[] = []\n  recentTransactions.map((transaction) => {\n    const lockIsOptimistc = willUnlock(\n      provider,\n      user,\n      transaction.recipient,\n      transaction.transactionHash,\n      false // Pessimistic if missing\n    )\n\n    if (lockIsOptimistc) {\n      unlocked.push(transaction.recipient)\n    }\n  })\n\n  return unlocked\n}\n\n/**\n * This method will query the backend to ensure that a transaction will succeed in generating a key for that user.\n * TODO: Everything in here should happen server side.\n * @param user\n * @param lock\n * @param transactionHash\n */\nexport const willUnlock = async (\n  provider: string,\n  user: string,\n  lock: string,\n  transactionHash: string,\n  optimisticIfMissing: boolean\n) => {\n  if (user && lock && transactionHash) {\n    const transaction = await getTransaction(provider, transactionHash)\n    if (!transaction) {\n      return !!optimisticIfMissing\n    }\n    if (transaction.blockNumber) {\n      // The transaction has actually been mined, so we should check whether indeed there is a key!\n      const expiration = await keyExpirationTimestampFor(provider, lock, user)\n      return expiration > new Date().getTime() / 1000\n    }\n    // The transaction, has not been mined, let's be optimisic\n    return true\n  }\n  return false\n}\n\n/**\n * Returns all transactions from a user to a lock\n * @param locksmithUri\n * @param user\n * @param locks\n */\nexport const getTransactionsForUserAndLocks = async (\n  locksmithUri: string,\n  user: string,\n  locks: string[]\n): Promise<StoredTransaction[]> => {\n  const filterLocks = locks\n    .map(\n      (lockAddress: string) => `recipient[]=${encodeURIComponent(lockAddress)}`\n    )\n    .join('&')\n\n  const url = `${locksmithUri}/transactions?for=${user}&${filterLocks}`\n  const response = await fetch(url)\n  const body = await response.json()\n  return body.transactions\n}\n\nexport const withinLast24Hours = (dateString: string) => {\n  const oneDay = 86400000 // 24 * 60 * 60 * 1000\n  const yesterday = Date.now() - oneDay\n  const date = new Date(dateString).getTime()\n\n  return date > yesterday\n}\n\nexport default optimisticUnlocking\n","// copied from the MDN docs as the best way to detect localStorage presence\n// https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Testing_for_availability\nexport default function localStorageAvailable(window) {\n  try {\n    var storage = window.localStorage\n    const x = '__storage_test__'\n    storage.setItem(x, x)\n    storage.removeItem(x)\n    return true\n  } catch (e) {\n    return (\n      e instanceof DOMException &&\n      // everything except Firefox\n      (e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage.length !== 0\n    )\n  }\n}\n\nexport function store(key, value) {\n  if (localStorageAvailable(window)) {\n    window.localStorage.setItem(key, JSON.stringify(value))\n  } else {\n    // Fail silently!\n  }\n}\n\nexport function retrieve(key) {\n  if (localStorageAvailable(window)) {\n    return JSON.parse(window.localStorage.getItem(key))\n  }\n  return undefined\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Paywall } from './Paywall'\nimport { setupUnlockProtocolVariable } from './utils'\nimport { networkConfigs } from './networkConfigs'\n\ndeclare var PAYWALL_URL: string\n\nconst rawConfig = (window as any).unlockProtocolConfig\nconst baseUrl = PAYWALL_URL || 'localhost' // Set at build time\nif (!rawConfig) {\n  console.error(\n    'Missing window.unlockProtocolConfig. See docs on how to configure your locks: https://docs.unlock-protocol.com/'\n  )\n} else {\n  // set network based on hostname if missing in rawConfig\n  if (!rawConfig.network) {\n    if (baseUrl.match('staging-paywall.unlock-protocol.com')) {\n      rawConfig.network = 4\n      console.error(\n        'Missing network in Unlock config. Assigned default to mainnet: 1. See https://docs.unlock-protocol.com/'\n      )\n    } else if (baseUrl.match('paywall.unlock-protocol.com')) {\n      rawConfig.network = 1\n      console.error(\n        'Missing network in Unlock config. Assigned default to rinkeby 4. See https://docs.unlock-protocol.com/'\n      )\n    } else {\n      console.error(\n        'Missing network in Unlock config. Please set one. See https://docs.unlock-protocol.com/'\n      )\n    }\n  } else {\n    rawConfig.network = parseInt(rawConfig.network)\n  }\n\n  const paywall = new Paywall(rawConfig, networkConfigs)\n  const { getState, getUserAccountAddress, loadCheckoutModal, resetConfig } =\n    paywall\n\n  setupUnlockProtocolVariable({\n    loadCheckoutModal,\n    resetConfig,\n    getUserAccountAddress,\n    getState,\n  })\n}\n"],"sourceRoot":""}