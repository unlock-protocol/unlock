!(function(e, t) {
  'object' == typeof exports && 'undefined' != typeof module
    ? (module.exports = t())
    : 'function' == typeof define && define.amd
      ? define(t)
      : (((e = e || self).paywall = e.paywall || {}), (e.paywall.js = t()))
})(this, function() {
  'use strict'
  var d = [
    'display:none',
    'position:fixed',
    'top:0',
    'left:0',
    'width:100%',
    'height:100vh',
    'border:0px',
    'background: linear-gradient(rgba(255,255,255,0) 18%, rgba(255,255,255,0) 29%, rgb(255,255,255) 48%)',
    'z-index: -2147483647',
  ]
  var u = 'http://localhost:3000'
  function s(e, t) {
    new MutationObserver(
      function(l, e) {
        e.filter(function(e) {
          if (e.addedNodes.length && e.addedNodes.length) {
            var t = !0,
              n = !1,
              a = void 0
            try {
              for (
                var r, o = e.addedNodes.entries()[Symbol.iterator]();
                !(t = (r = o.next()).done);
                t = !0
              ) {
                var i = r.value
                if (
                  'META' === i[1].nodeName &&
                  i[1].attributes.name &&
                  'lock' === i[1].attributes.name.nodeValue
                )
                  return !0
              }
            } catch (e) {
              ;(n = !0), (a = e)
            } finally {
              try {
                t || null == o.return || o.return()
              } finally {
                if (n) throw a
              }
            }
          }
        }).forEach(function(e) {
          var t = !0,
            n = !1,
            a = void 0
          try {
            for (
              var r, o = e.addedNodes.entries()[Symbol.iterator]();
              !(t = (r = o.next()).done);
              t = !0
            ) {
              var i = r.value
              'META' === i[1].nodeName &&
                i[1].attributes.name &&
                'lock' === i[1].attributes.name.nodeValue &&
                l(i[1].attributes.content.nodeValue)
            }
          } catch (e) {
            ;(n = !0), (a = e)
          } finally {
            try {
              t || null == o.return || o.return()
            } finally {
              if (n) throw a
            }
          }
        })
      }.bind(null, e)
    ).observe(t, { childList: !0, attributes: !0 })
  }
  function t(e, t, n) {
    var a = e.unlock_url
    if (
      (a ||
        (a = (function(e) {
          for (
            var t = e.getElementsByTagName('script'),
              n = /static\/paywall/i,
              a = 0;
            a < t.length;
            a++
          ) {
            var r = t[a].getAttribute('src')
            if (n.test(r)) return r.replace('/static/paywall.min.js', '')
          }
          return u
        })(t)),
      !n)
    )
      return s(t.head)
    var r,
      o,
      i = ((r = a += '/paywall/'.concat(n, '/')),
      (o = t.createElement('iframe')).setAttribute('style', d.join('; ')),
      o.setAttribute('src', r),
      o)
    t.body.appendChild(i), console.log(i)
    var l = !1
    e.addEventListener(
      'message',
      function(e) {
        var t, n
        'locked' !== e.data ||
          l ||
          ((l = !0),
          ((t = i).style.display = 'block'),
          (t.style['z-index'] = '2147483647')),
        'unlocked' === e.data &&
            ((l = !1),
            ((n = i).style.backgroundColor = 'transparent'),
            (n.style.backgroundImage = 'none'))
      },
      !1
    )
  }
  return (
    s(function(e) {
      t(window, document, e)
    }, document.head),
    t
  )
})
